<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
    <title>乐山安珀酒店运营分析看板</title>
    <!-- React and React DOM UMD versions -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.3.1/umd/react.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.3.1/umd/react-dom.production.min.js"></script>
    <!-- ECharts for charts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/echarts/6.0.0/echarts.min.js"></script>
    <!-- React Grid Layout UMD version -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-grid-layout/1.5.2/react-grid-layout.min.js"></script>
    <!-- PapaParse for CSV parsing -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>
    <!-- marked for markdown -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/marked/16.1.1/lib/marked.umd.min.js"></script>
    <!-- Tabler Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tabler-icons/3.34.1/tabler-icons.min.css" />
    <!-- Style files -->
    <link rel="stylesheet" href="./index.css" />
    <!-- Desktop optimization styles -->
    <style>
      /* 电脑端优化样式 */
      @media screen and (min-width: 1024px) {
        body {
          margin: 0;
          padding: 0;
          width: 100%;
          height: 100vh;
          overflow-x: auto;
          overflow-y: auto;
        }
        
        #root {
          width: 100%;
          min-width: 1200px;
          height: auto;
          padding: 20px;
          box-sizing: border-box;
        }
        
        /* 确保看板容器充分利用屏幕空间 */
        .react-grid-layout {
          width: 100% !important;
          min-width: 1200px;
          max-width: none;
        }
        
        /* 优化卡片在大屏幕上的显示 */
        .dashboard-card {
          border-radius: 8px;
          box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
          transition: box-shadow 0.3s ease;
        }
        
        .dashboard-card:hover {
          box-shadow: 0 4px 16px rgba(0, 0, 0, 0.15);
        }
        
        /* 优化表格在大屏幕上的显示 */
        .ant-table-wrapper {
          font-size: 14px;
        }
        
        .ant-table th,
        .ant-table td {
          padding: 12px 16px;
        }
        
        /* 优化图表标题 */
        .card-title {
          font-size: 16px;
          font-weight: 600;
          margin-bottom: 16px;
        }
        
        /* 优化指标卡片 */
        .metric-card {
          text-align: center;
          padding: 24px;
        }
        
        .metric-value {
          font-size: 32px;
          font-weight: bold;
          margin: 16px 0;
        }
        
        .metric-label {
          font-size: 14px;
          color: #666;
          margin-bottom: 8px;
        }
        
        /* 优化Markdown内容显示 */
        .markdown-content {
          padding: 24px;
          line-height: 1.6;
          font-size: 14px;
        }
        
        .markdown-content h2 {
          font-size: 24px;
          margin: 24px 0 16px 0;
          border-bottom: 2px solid #e5e7eb;
          padding-bottom: 8px;
        }
        
        .markdown-content h3 {
          font-size: 20px;
          margin: 20px 0 12px 0;
        }
        
        .markdown-content h4 {
          font-size: 16px;
          margin: 16px 0 8px 0;
        }
        
        .markdown-content ul {
          margin: 12px 0;
          padding-left: 24px;
        }
        
        .markdown-content li {
          margin: 8px 0;
        }
        
        /* 滚动条样式优化 */
        ::-webkit-scrollbar {
          width: 8px;
          height: 8px;
        }
        
        ::-webkit-scrollbar-track {
          background: #f1f1f1;
          border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb {
          background: #c1c1c1;
          border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
          background: #a8a8a8;
        }
      }
      
      /* 超大屏幕优化 */
      @media screen and (min-width: 1920px) {
        #root {
          max-width: 1800px;
          margin: 0 auto;
          padding: 40px;
        }
        
        .react-grid-layout {
          min-width: 1760px;
          max-width: none;
        }
        
        .metric-value {
          font-size: 36px;
        }
        
        .card-title {
          font-size: 18px;
        }
        
        .markdown-content {
          font-size: 15px;
          padding: 32px;
        }
      }
      
      /* 中等屏幕优化 */
      @media screen and (min-width: 1024px) and (max-width: 1439px) {
        #root {
          padding: 16px;
        }
        
        .react-grid-layout {
          min-width: 1200px;
          max-width: none;
        }
      }
    </style>
    <!-- Configuration file -->
    <script src="./config.js"></script>
    <!-- Data configuration file -->
    <script src="./data.js"></script>
    <!-- Dashboard bundle file -->
    <script src="./dashboard.js"></script>
    <!-- Magic Project -->
    <script>
      window.magicDashboard = {
        language: "zh-CN", // "zh-CN"、"en-US"
        dataSources: [],
        geo: [],
        ready: true,
        draggable: false,
        resizable: false,
        deletable: false,
        expandable: true,
      };
      window.magicProjectConfigure = function (config) {
        document.title = config.name;
        window.magicDashboard = {
          ...window.magicDashboard,
          ...config,
        };
        window.language.updateFromConfig();
      };
    </script>
    <!-- Magic Project Config -->
    <script src="./magic.project.js"></script>
  </head>
  <body>
    <div id="root"></div>
    <!-- Set ECharts Theme -->
    <script>
      window.ECHARTS_THEME_NAME = "dashboard";
      window.GET_ECHARTS_THEME_CONFIG = function (dashboardConfig) {
        var fontFamily = dashboardConfig.BODY_FONT_FAMILY;
        var fontSize = parseFloat(dashboardConfig.BASE_FONT_SIZE);
        var fontSizeSecondary = fontSize - 2;
        var fontSizeWithPixel = `${fontSize}px`;
        var fontSizeSecondaryWithPixel = `${fontSizeSecondary}px`;
        var colorTextPrimary = dashboardConfig.COLORS_TEXT_PRIMARY;
        var colorTextSecondary = dashboardConfig.COLORS_TEXT_SECONDARY;
        var colorTextThird = dashboardConfig.COLORS_TEXT_THIRD;
        var colorBorder = dashboardConfig.COLORS_BORDER;
        var colorPrimary = dashboardConfig.COLORS_PRIMARY;
        var color = dashboardConfig.ECHARTS_COLOR.slice();
        return {
          color,
          backgroundColor: "transparent",
          textStyle: {
            color: colorTextPrimary,
            fontFamily: fontFamily,
            fontSize: fontSizeWithPixel,
          },
          title: {
            textStyle: {
              color: colorTextPrimary,
              fontFamily: fontFamily,
              fontSize: fontSizeWithPixel,
            },
            subtextStyle: {
              color: colorTextThird,
              fontFamily: fontFamily,
              fontSize: fontSizeSecondaryWithPixel,
            },
          },
          legend: {
            type: "scroll",
            itemWidth: 20, // 25
            itemHeight: 11.2, // 14
            textStyle: {
              color: colorTextThird,
              fontFamily: fontFamily,
              fontSize: fontSizeWithPixel,
            },
          },
          categoryAxis: {
            axisLine: {
              lineStyle: { color: colorBorder },
            },
            axisTick: {
              lineStyle: { color: colorBorder },
            },
            axisLabel: {
              color: colorTextThird,
              fontFamily: fontFamily,
              fontSize: fontSizeWithPixel,
              hideOverlap: true,
            },
            nameTextStyle: {
              color: colorTextThird,
              fontFamily: fontFamily,
              fontSize: fontSizeWithPixel,
            },
            splitLine: {
              show: false,
              lineStyle: { color: colorBorder },
            },
          },
          valueAxis: {
            alignTicks: true,
            axisLine: {
              lineStyle: { color: colorBorder },
            },
            axisTick: {
              lineStyle: { color: colorBorder },
            },
            axisLabel: {
              color: colorTextThird,
              fontFamily: fontFamily,
              fontSize: fontSizeWithPixel,
              hideOverlap: true,
            },
            nameTextStyle: {
              color: colorTextThird,
              fontFamily: fontFamily,
              fontSize: fontSizeWithPixel,
            },
            splitLine: {
              lineStyle: { color: colorBorder },
            },
          },
          toolbox: {
            iconStyle: {
              colorBorder: colorTextThird,
            },
            emphasis: {
              iconStyle: {
                colorBorder: colorBorder,
              },
            },
          },
          tooltip: {
            appendTo: "body",
            appendToBody: true,
            renderMode: "html",
            className: "echarts-tooltip",
            padding: 6,
            textStyle: {
              fontFamily: fontFamily,
              fontSize: fontSizeWithPixel,
              color: colorTextThird,
            },
            axisPointer: {
              label: {
                backgroundColor: colorPrimary,
              },
            },
          },
          pie: {
            label: {
              color: colorTextSecondary,
              fontFamily: fontFamily,
              fontSize: fontSizeWithPixel,
            },
            labelLine: {
              lineStyle: {
                color: colorBorder,
              },
            },
          },
          bar: {
            label: {
              color: colorTextSecondary,
              fontFamily: fontFamily,
              fontSize: fontSizeWithPixel,
            },
          },
          line: {
            label: {
              color: colorTextSecondary,
              fontFamily: fontFamily,
              fontSize: fontSizeWithPixel,
            },
          },
          scatter: {
            label: {
              color: colorTextSecondary,
              fontFamily: fontFamily,
              fontSize: fontSizeWithPixel,
            },
          },
          visualMap: {
            padding: 0,
            textStyle: {
              color: colorTextThird,
              fontFamily: fontFamily,
              fontSize: fontSizeSecondaryWithPixel,
            },
            inRange: {
              color: (function () {
                const hex = colorPrimary.slice(1);
                const r = parseInt(hex.slice(0, 2), 16);
                const g = parseInt(hex.slice(2, 4), 16);
                const b = parseInt(hex.slice(4, 6), 16);
                return [`rgba(${r}, ${g}, ${b}, 0.1)`, `rgba(${r}, ${g}, ${b}, 0.3)`, `rgba(${r}, ${g}, ${b}, 0.5)`, `rgba(${r}, ${g}, ${b}, 0.7)`, `rgba(${r}, ${g}, ${b}, 1)`];
              })(),
            },
            outOfRange: {
              color: [colorBorder],
            },
            controller: {
              inRange: {
                color: [colorPrimary],
              },
              outOfRange: {
                color: [colorBorder],
              },
            },
          },
        };
      };
      window.echarts.registerTheme(window.ECHARTS_THEME_NAME, window.GET_ECHARTS_THEME_CONFIG(window.DASHBOARD_CONFIG));
    </script>
    <!-- Desktop optimization script -->
    <script>
      // 电脑端优化脚本
      (function() {
        // 检测屏幕尺寸并优化显示
        function optimizeForDesktop() {
          const screenWidth = window.screen.width;
          const screenHeight = window.screen.height;
          
          // 大屏幕优化
          if (screenWidth >= 1920) {
            document.documentElement.style.fontSize = '16px';
          } else if (screenWidth >= 1440) {
            document.documentElement.style.fontSize = '15px';
          } else if (screenWidth >= 1024) {
            document.documentElement.style.fontSize = '14px';
          }
          
          // 添加屏幕尺寸类名
          document.body.classList.add('screen-' + (screenWidth >= 1920 ? 'xl' : screenWidth >= 1440 ? 'lg' : 'md'));
        }
        
        // 页面加载完成后优化
        if (document.readyState === 'loading') {
          document.addEventListener('DOMContentLoaded', optimizeForDesktop);
        } else {
          optimizeForDesktop();
        }
        
        // 窗口大小改变时重新优化
        window.addEventListener('resize', function() {
          clearTimeout(window.resizeTimeout);
          window.resizeTimeout = setTimeout(optimizeForDesktop, 250);
        });
        
        // 添加键盘快捷键支持
        document.addEventListener('keydown', function(e) {
          // Ctrl/Cmd + R 刷新页面
          if ((e.ctrlKey || e.metaKey) && e.key === 'r') {
            e.preventDefault();
            window.location.reload();
          }
          
          // F11 全屏切换
          if (e.key === 'F11') {
            e.preventDefault();
            if (document.fullscreenElement) {
              document.exitFullscreen();
            } else {
              document.documentElement.requestFullscreen();
            }
          }
        });
      })();
    </script>
    
    <!-- Render application -->
    <script>
      const root = ReactDOM.createRoot(document.getElementById("root"));
      root.render(React.createElement(window.DashboardApp));
    </script>
  </body>
</html>
